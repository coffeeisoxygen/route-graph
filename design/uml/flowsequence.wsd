@startuml Flow Calculation Sequence

actor Client
participant FlowCalculationService
participant HeadLossCalculator
participant PressureCalculator
participant VelocityCalculator
participant HydraulicValidator

Client -> FlowCalculationService: calculateFlow(pipe, pressureIn)
activate FlowCalculationService

FlowCalculationService -> HydraulicValidator: validatePressure(pressureIn)
activate HydraulicValidator
HydraulicValidator --> FlowCalculationService
deactivate HydraulicValidator

FlowCalculationService -> VelocityCalculator: calculate(pressure)
activate VelocityCalculator
VelocityCalculator --> FlowCalculationService: velocity
deactivate VelocityCalculator

FlowCalculationService -> HeadLossCalculator: calculateFrictionFactor(...)
activate HeadLossCalculator
HeadLossCalculator --> FlowCalculationService: frictionFactor
deactivate HeadLossCalculator

FlowCalculationService -> HeadLossCalculator: calculate(...)
activate HeadLossCalculator
HeadLossCalculator --> FlowCalculationService: headLoss
deactivate HeadLossCalculator

FlowCalculationService -> PressureCalculator: calculatePressureOut(...)
activate PressureCalculator
PressureCalculator --> FlowCalculationService: pressureOut
deactivate PressureCalculator

FlowCalculationService --> Client: FlowResult
deactivate FlowCalculationService

@enduml
